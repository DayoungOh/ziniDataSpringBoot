<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zinidata.bizmap.mapper.BizMainMapper">

    <insert id="setCert">
        insert into em_tran (tran_pr, tran_phone, tran_callback, tran_status, tran_date, tran_msg, tran_type)
        values((select nextval('em_tran_pr')), #{mobileNo}, #{tranCallback}, '1', now(), #{tranMsg}, 4)
    </insert>

    <select id="getSubscribe" resultType="integer">
        select count(*) as cnt
        from tb_subscribe_info
        where mobile_no =#{mobileNo} and mem_nm=#{memNm}
    </select>

    <insert id="setSubscribeIns">
        insert into tb_subscribe_info
            (mobile_no,mem_nm,mem_type,interest_areacd,interest_upjong,personal_info,marketing_info)
        values (#{mobileNo},#{memNm},#{memType},#{interestAreacd},#{interestUpjong},#{personalInfo},#{marketingInfo})
    </insert>

    <update id="setSubscribeUpd">
        update tb_subscribe_info
        set mem_type = #{memType}
        , interest_areacd = #{interestAreacd}
        , interest_upjong = #{interestUpjong}
        , update_date = now()
        , personal_info = #{personalInfo}
        , marketing_info = #{marketingInfo}
    </update>
</mapper>